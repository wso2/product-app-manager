<div class="row">
    <div class="pull-left heading" align="left"><h1>Mobile Applications</h1>
    </div>
</div>

<div class="asset-being-added">
</div>



    {{#if artifacts}}
    <div class="row-fluid">
        <table class="table table-striped list-asset-table">
            <thead>
                <th colspan="2" width="30%">
                    {{#ifCond sortOptions.sortBy "==" "name"}}
                        <a href="?sortby=name&sort={{sortOptions.sort}}">Name
                            <i class="icon-caret-{{sortOptions.icon}}"></i></a>
                    {{else}}
                        <a href="?sortby=name&sort=asc">Name <i class="icon-caret-down"></i></a>
                    {{/ifCond}}
                </th>
                {{#if ../this.isReviwer}}<th></th>{{/if}}
                <th>
                    {{#ifCond sortOptions.sortBy "==" "os"}}
                        <a href="?sortby=os&sort={{sortOptions.sort}}">Platform
                            <i class="icon-caret-{{sortOptions.icon}}"></i></a>
                    {{else}}
                        <a href="?sortby=os&sort=asc">Platform<i class="icon-caret-down"></i></a>
                    {{/ifCond}}
                </th>
                <th>
                    {{#ifCond sortOptions.sortBy "==" "type"}}
                        <a href="?sortby=type&sort={{sortOptions.sort}}">Type
                            <i class="icon-caret-{{sortOptions.icon}}"></i></a>
                    {{else}}
                        <a href="?sortby=type&sort=asc">Type<i class="icon-caret-down"></i></a>
                    {{/ifCond}}
                </th>
                <th>
                    {{#ifCond sortOptions.sortBy "==" "owner"}}
                        <a href="?sortby=owner&sort={{sortOptions.sort}}">Owner
                            <i class="icon-caret-{{sortOptions.icon}}"></i></a>
                    {{else}}
                        <a href="?sortby=owner&sort=asc">Owner <i class="icon-caret-down"></i></a>
                    {{/ifCond}}
                </th>
                <th>
                    {{#ifCond sortOptions.sortBy "==" "version"}}
                        <a href="?sortby=version&sort={{sortOptions.sort}}">Version
                            <i class="icon-caret-{{sortOptions.icon}}"></i></a>
                    {{else}}
                        <a href="?sortby=version&sort=asc">Version <i class="icon-caret-down"></i></a>
                    {{/ifCond}}
                </th>
                <th>
                    {{#ifCond sortOptions.sortBy "==" "createdtime"}}
                        <a href="?sortby=createdtime&sort={{sortOptions.sort}}">Created
                            <i class="icon-caret-{{sortOptions.icon}}"></i></a>
                    {{else}}
                        <a href="?sortby=createdtime&sort=asc">Created<i class="icon-caret-down"></i></a>
                    {{/ifCond}}
                </th>
                <th><a href="#">Status</a></th>
                <th width="50%"><a href="#">Actions</a></th>

</thead>
            <tbody>
    {{#each artifacts}}
    <tr data-status="{{this.lifecycleState}}" class="app-row">
        <td>
            <img src="{{this.attributes.images_thumbnail}}" class="" />
        </td>
        <td class="asset-listing-name">
            {{#if ../updateMobileAppAuthorized}}
                {{#if this.enableEdit}}
                    <a href='/publisher/asset/operations/edit/mobileapp/{{this.id}}'>
                  {{else}}
                    <a href='#'>
                {{/if}}
             {{else}}
                 <a href='#'>
            {{/if}}
                    {{this.attributes.overview_name}}
            </a>
        </td>


        {{#if ../this.isReviwer}}
            <td>
            <button  class="btn btn-view-app" data-url="{{../this.attributes.overview_url}}"
                     data-appid="{{../this.attributes.overview_appid}}" data-type="{{../this.attributes.overview_type}}"
                     data-package="{{../this.attributes.overview_packagename}}"
                     title="Get Download link or QR code"
                     data-category="{{../this.attributes.overview_category}}"  data-id="{{../this.id}}" >
                <i class="icon-download"></i>
            </button>
            </td>
        {{/if}}

        <td>
            <img src="/publisher/themes/mobileapp/img/mobileapps/{{this.attributes.overview_platform}}.png">
        </td>

        <td>
            {{this.attributes.overview_type}}
        </td>
        <td>
            {{this.attributes.overview_provider}}
        </td> 
        <td>
            {{this.attributes.overview_version}} <a href="/publisher/asset/mobileapp/{{this.id}}"><i class="add-new-version icon-plus-sign pull-right" style="padding-right: 20px" title="Add New Version"></i></a>
        </td>
        <td>
            <small>{{this.attributes.overview_createdtime}}</small>
        </td>
        <td>
            {{#compare this.lifecycleState "Published"}}
            <span class="lifecycle-state"><small><i class="icon-circle text-green"></i> {{this.lifecycleState}}</small></span>
            {{/compare}}
            {{#compare this.lifecycleState "Created"}}
            <span class="lifecycle-state"><small><i class="icon-circle text-yellow"></i> {{this.lifecycleState}}</small></span>
            {{/compare}}
            {{#compare this.lifecycleState "In-Review"}}
            <span class="lifecycle-state"><small><i class="icon-circle text-yellow"></i> {{this.lifecycleState}}</small></span>
            {{/compare}}                        	
            {{#compare this.lifecycleState "Unpublished"}}
            <span class="lifecycle-state"><small><i class="icon-circle text-yellow"></i> {{this.lifecycleState}}</small></span>
            {{/compare}}
            {{#compare this.lifecycleState "Approved"}}
            <span class="lifecycle-state"><small><i class="icon-circle text-green"></i> {{this.lifecycleState}}</small></span>
            {{/compare}}
            {{#compare this.lifecycleState "Rejected"}}
            <span class="lifecycle-state"><small><i class="icon-circle text-red"></i> {{this.lifecycleState}}</small></span>
            {{/compare}}
            {{#compare this.lifecycleState "Retired"}}	
            <span class="lifecycle-state"><small><i class="icon-circle text-red"></i> {{this.lifecycleState}}</small></span>
            {{/compare}}
            {{#compare this.lifecycleState "Deprecated"}}
                <span class="lifecycle-state"><small><i class="icon-circle text-red"></i> {{this.lifecycleState}}</small></span>
            {{/compare}}




        </td>

        <td>



            {{#this.lifecycleAvailableActions}}                         		
            <a  data-action="{{name}}" data-app="{{../this.id}}" class="btn {{style}} btn-action" name="addNewAssetButton">{{name}}</a>
            {{/this.lifecycleAvailableActions}}
            <a  data-app="{{this.id}}"  data-app-name="{{this.attributes.overview_name}}" class="btn btn-danger delete-mobile-app">Delete</a>




        </td>

    </tr>
    {{/each}}
    </tbody>
        </table>


    <nav>
        <ul class="pagination">
            {{#if leftNav}}
                <li><a href="/publisher/assets/mobileapp/?page={{this.leftNav}}"><span aria-hidden="true">&laquo;</span><span class="sr-only">Previous</span></a></li>
            {{/if}}
            {{#each pageIndices}}
                {{#if this.isDisabled}}
                    <li class="disabled"><a>{{this.index}}</a></li>
                {{else}}
                    <li><a href="/publisher/assets/mobileapp/?page={{this.index}}">{{this.index}}</a></li>
                {{/if}}
            {{/each}}
            {{#if rightNav}}
                <li><a href="/publisher/assets/mobileapp/?page={{this.rightNav}}"><span aria-hidden="true">&raquo;</span><span class="sr-only">Next</span></a></li>
            {{/if}}
        </ul>
    </nav>



    </div>
{{else}}
    <div class="emptyAssets-MsgDiv">
        <i class="icon-inbox largeMsgIcon"></i>
        <br />
        No mobile applications added yet.
        <br />
        {{#if mobileAppCreatePermission}}
        <a type="button" class="btn btn-addNewAssetLarge" href="/publisher/asset/{{shortName}}"><i class="icon-plus-sign-alt"></i>Add New Mobile App</a>
    {{/if}}
    </div>

{{/if}}
</div>

<div id="appModal" class="modal  fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">x</button>
            <h4 id="myModalLabel"><i class="icon-download"></i> App</h4>
            </div>
            <div class="modal-body">
             <div class="row offset1" style="padding: 20px">
             Download URL : <a href="" id="appModalAppURL">Download/ View</a>
            <br>
                 <div id="qrcode" style="width:200px; padding: 20px;margin-left: 60px;"></div>


            </div>
            </div>
    </div>
    </div>
</div>



<div class="modal fade" id="messageModal3" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title">Modal title</h4>
            </div>
            <div class="modal-body">
                <textarea id="commentText" style="width: 100%" rows="2" placeholder="Please add comment here.&hellip;"></textarea>
                <input type="hidden" value="" name="webappName" id="webappName" />
                <input type="hidden" value="" name="action" id="action" />
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-reject-proceed">Proceed</button>
            </div>
        </div>
    </div>
</div>


